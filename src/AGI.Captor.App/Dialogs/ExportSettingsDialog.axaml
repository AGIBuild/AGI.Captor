<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="AGI.Captor.App.Dialogs.ExportSettingsDialog"
        Title="Export Settings"
        Width="520"
        Height="580"
        CanResize="false"
        WindowStartupLocation="CenterOwner"
        Background="Transparent"
        TransparencyLevelHint="AcrylicBlur"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        SystemDecorations="BorderOnly">

  <Window.Styles>
    <!-- Main container style -->
    <Style Selector="Border.main-container">
      <Setter Property="Background" Value="#B0001122"/>
      <Setter Property="CornerRadius" Value="5"/>
      <Setter Property="Margin" Value="0"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="BoxShadow" Value="0 8 32 0 #60000000"/>
    </Style>
    
    <!-- Title bar style -->
    <Style Selector="Border.title-bar">
      <Setter Property="Background" Value="#40224466"/>
      <Setter Property="CornerRadius" Value="5,5,0,0"/>
      <Setter Property="Padding" Value="12,8"/>
      <Setter Property="BorderThickness" Value="0,0,0,1"/>
      <Setter Property="BorderBrush" Value="#40336699"/>
    </Style>
    
    <Style Selector="TextBlock.title">
      <Setter Property="FontSize" Value="14"/>
      <Setter Property="FontWeight" Value="Bold"/>
      <Setter Property="Foreground" Value="#FFFFFF"/>
    </Style>
    
    <!-- Group styles -->
    <Style Selector="Border.group">
      <Setter Property="Background" Value="#40224466"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="BorderBrush" Value="#50336699"/>
      <Setter Property="CornerRadius" Value="5"/>
      <Setter Property="Padding" Value="12"/>
      <Setter Property="Margin" Value="0,0,0,8"/>
      <Setter Property="BoxShadow" Value="0 2 8 0 #40000000"/>
    </Style>
    
    <Style Selector="TextBlock.header">
      <Setter Property="FontSize" Value="13"/>
      <Setter Property="FontWeight" Value="Bold"/>
      <Setter Property="Margin" Value="0,0,0,8"/>
      <Setter Property="Foreground" Value="#FFFFFF"/>
    </Style>
    
    <!-- Form controls -->
    <Style Selector="TextBlock">
      <Setter Property="Foreground" Value="#F0FFFFFF"/>
      <Setter Property="FontSize" Value="11"/>
    </Style>
    
    <Style Selector="TextBox">
      <Setter Property="Background" Value="#40224466"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="BorderBrush" Value="#6044AACC"/>
      <Setter Property="CornerRadius" Value="5"/>
      <Setter Property="Padding" Value="8,6"/>
      <Setter Property="Foreground" Value="#FFFFFF"/>
      <Setter Property="FontSize" Value="11"/>
    </Style>
    
    <Style Selector="TextBox:focus">
      <Setter Property="Background" Value="#50336699"/>
    </Style>
    
    <Style Selector="TextBox /template/ Border#PART_BorderElement">
      <Setter Property="Background" Value="#40224466"/>
    </Style>
    
    <Style Selector="TextBox:focus /template/ Border#PART_BorderElement">
      <Setter Property="Background" Value="#50336699"/>
    </Style>
    
    <Style Selector="ComboBox">
      <Setter Property="Background" Value="#50336699"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="BorderBrush" Value="#6044AACC"/>
      <Setter Property="CornerRadius" Value="5"/>
      <Setter Property="Padding" Value="8,6"/>
      <Setter Property="Foreground" Value="#FFFFFF"/>
      <Setter Property="FontSize" Value="11"/>
    </Style>
    
    <Style Selector="Button">
      <Setter Property="Background" Value="#50336699"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="BorderBrush" Value="#6044AACC"/>
      <Setter Property="CornerRadius" Value="5"/>
      <Setter Property="Padding" Value="8,6"/>
      <Setter Property="Foreground" Value="#FFFFFF"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="FontSize" Value="11"/>
    </Style>
    
    <Style Selector="Button:pointerover">
      <Setter Property="Background" Value="#7044AACC"/>
    </Style>
    
    <Style Selector="Button:pressed">
      <Setter Property="Background" Value="#9055BBDD"/>
    </Style>
    
    <Style Selector="Button.primary">
      <Setter Property="Background" Value="#FF4477BB"/>
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="BorderBrush" Value="#FF336699"/>
    </Style>
    
    <Style Selector="Button.primary:pointerover">
      <Setter Property="Background" Value="#FF5588CC"/>
    </Style>
    
    <Style Selector="Button.primary:pressed">
      <Setter Property="Background" Value="#FF336699"/>
    </Style>
    
    <Style Selector="Slider">
      <Setter Property="Foreground" Value="#FF4477BB"/>
    </Style>
    
    <Style Selector="CheckBox">
      <Setter Property="FontSize" Value="11"/>
      <Setter Property="Margin" Value="0,2"/>
      <Setter Property="Foreground" Value="#F0FFFFFF"/>
    </Style>
    
    <!-- Bottom bar styles -->
    <Style Selector="Border.bottom-bar">
      <Setter Property="Background" Value="#40224466"/>
      <Setter Property="BorderThickness" Value="0,1,0,0"/>
      <Setter Property="BorderBrush" Value="#50336699"/>
      <Setter Property="Padding" Value="12,8"/>
      <Setter Property="CornerRadius" Value="0,0,5,5"/>
    </Style>
  </Window.Styles>

  <!-- Main container with glass effect -->
  <Border Classes="main-container">
    <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Custom title bar -->
    <Border Grid.Row="0" Classes="title-bar">
      <TextBlock Classes="title" Text="Export Settings" 
                 VerticalAlignment="Center" HorizontalAlignment="Center"/>
    </Border>

    <!-- Settings Panel -->
    <ScrollViewer Grid.Row="1" Padding="8">
      <StackPanel Spacing="8">
        
        <!-- Format Settings -->
        <Border Classes="group">
          <StackPanel>
            <TextBlock Classes="header" Text="Format Settings"/>
            
            <Grid ColumnDefinitions="Auto,*" Margin="0,4">
              <TextBlock Grid.Column="0" Text="Format:" VerticalAlignment="Center" Margin="0,0,10,0"/>
              <ComboBox Grid.Column="1" x:Name="FormatComboBox" HorizontalAlignment="Stretch"/>
            </Grid>
            
            <Grid ColumnDefinitions="Auto,*" Margin="0,4">
              <TextBlock Grid.Column="0" Text="DPI:" VerticalAlignment="Center" Margin="0,0,10,0"/>
              <ComboBox Grid.Column="1" x:Name="DpiComboBox" HorizontalAlignment="Stretch">
                <ComboBoxItem Content="72 DPI (Web)" Tag="72"/>
                <ComboBoxItem Content="96 DPI (Standard)" Tag="96" IsSelected="True"/>
                <ComboBoxItem Content="150 DPI (High)" Tag="150"/>
                <ComboBoxItem Content="300 DPI (Print)" Tag="300"/>
              </ComboBox>
            </Grid>
            
            <CheckBox x:Name="PreserveTransparencyCheckBox" 
                      Content="Preserve transparency"
                      IsChecked="True"
                      Margin="0,8,0,0"/>
          </StackPanel>
        </Border>

        <!-- Quality Settings -->
        <Border Classes="group" x:Name="QualityPanel">
          <StackPanel>
            <TextBlock Classes="header" Text="Quality Settings"/>
            
            <Grid ColumnDefinitions="Auto,*,50" Margin="0,4">
              <TextBlock Grid.Column="0" Text="Quality:" VerticalAlignment="Center" Margin="0,0,10,0"/>
              <Slider Grid.Column="1" x:Name="QualitySlider"
                      Minimum="1" Maximum="100" Value="90" 
                      TickFrequency="10" IsSnapToTickEnabled="True" Margin="0,0,10,0"/>
              <TextBlock Grid.Column="2" x:Name="QualityText" 
                         Text="90" VerticalAlignment="Center" HorizontalAlignment="Center"/>
            </Grid>
            
            <Grid ColumnDefinitions="Auto,*,50" Margin="0,4" x:Name="CompressionPanel">
              <TextBlock Grid.Column="0" Text="Compression:" VerticalAlignment="Center" Margin="0,0,10,0"/>
              <Slider Grid.Column="1" x:Name="CompressionSlider"
                      Minimum="0" Maximum="9" Value="6" 
                      TickFrequency="1" IsSnapToTickEnabled="True" Margin="0,0,10,0"/>
              <TextBlock Grid.Column="2" x:Name="CompressionText" 
                         Text="6" VerticalAlignment="Center" HorizontalAlignment="Center"/>
            </Grid>
            
            <TextBlock Text="Quality: Higher = better image, larger file • Compression: Higher = smaller file, slower"
                       FontSize="10" Margin="0,4,0,0"/>
          </StackPanel>
        </Border>



        <!-- Preview Info -->
        <Border Classes="group">
          <StackPanel>
            <TextBlock Classes="header" Text="Preview"/>
            <TextBlock x:Name="PreviewText" 
                       Text="Format: PNG, Quality: N/A, DPI: 96"
                       FontSize="11"/>
          </StackPanel>
        </Border>

        <!-- File Size Estimation -->
        <Border Classes="group">
          <StackPanel>
            <TextBlock Classes="header" Text="File Size Estimation"/>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock x:Name="FileSizeText" 
                         Grid.Column="0"
                         Text="~2.5 MB"
                         FontSize="13"
                         FontWeight="Bold"
                         Foreground="#66BB6A"/>
              <TextBlock x:Name="ImageDimensionsText"
                         Grid.Column="1"
                         Text="1920×1080"
                         FontSize="10"
                         VerticalAlignment="Center"/>
            </Grid>
            <TextBlock x:Name="CompressionInfoText" 
                       Text="Higher quality = larger file size"
                       FontSize="10"
                       Margin="0,4,0,0"/>
          </StackPanel>
        </Border>

    </StackPanel>
    </ScrollViewer>

    <!-- Bottom bar with buttons -->
    <Border Grid.Row="2" Classes="bottom-bar">
      <StackPanel Orientation="Horizontal" 
                  HorizontalAlignment="Right" 
                  Spacing="8">
        <Button x:Name="CancelButton" Content="Cancel"/>
        <Button x:Name="OkButton" Content="Export" Classes="primary"/>
      </StackPanel>
    </Border>

  </Grid>
  </Border>
</Window>
